<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Building Robust Components with FastAPI and Pydantic</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Building Robust Components with FastAPI and Pydantic</h1>
</header>
<section data-field="subtitle" class="p-summary">
Learn how to build robust FastAPI components using Pydantic for data validation, improving API integrity, readability, and error handling.
</section>
<section data-field="body" class="e-content">
<section name="242a" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="e210" id="e210" class="graf graf--h3 graf--leading graf--title">Building Robust Components with FastAPI and¬†Pydantic</h3><figure name="bf2f" id="bf2f" class="graf graf--figure graf-after--h3"><img class="graf-image" data-image-id="1*LfpvjEdRRu0UKmrH8RgosA.png" data-width="1024" data-height="1024" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*LfpvjEdRRu0UKmrH8RgosA.png"></figure><h3 name="7fcb" id="7fcb" class="graf graf--h3 graf-after--figure">Leveraging Well-Defined Objects for Efficient Data Validation</h3><p name="35f3" id="35f3" class="graf graf--p graf-after--h3">Objects serve as the entry and exit points for <a href="https://dev.to/kfir-g/enhancing-software-architecture-through-comprehensive-testing-in-backend-development-4bn2" data-href="https://dev.to/kfir-g/enhancing-software-architecture-through-comprehensive-testing-in-backend-development-4bn2" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">components</a>, acting as fundamental gateways for data flow. To create robust, maintainable components, it‚Äôs essential to define clear, well-structured fields within these objects. This ensures data integrity and reliable interactions among different system parts. Personally, I prefer using Python along with the FastAPI framework for developing modern, high-performance APIs. For data validation, Pydantic is my library of choice, seamlessly integrating with FastAPI to elegantly enforce field constraints and maintain consistency throughout the system.</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="python" name="2f09" id="2f09" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">from</span> fastapi <span class="hljs-keyword">import</span> FastAPI, HTTPException<br /><span class="hljs-keyword">from</span> pydantic <span class="hljs-keyword">import</span> BaseModel, EmailStr, Field, ValidationError, conint<br /><br /><span class="hljs-comment"># FastAPI instance</span><br />app = FastAPI()<br /><br /><span class="hljs-comment"># Pydantic model for request body validation</span><br /><span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):<br />    name: <span class="hljs-built_in">str</span> = Field(..., min_length=<span class="hljs-number">3</span>, max_length=<span class="hljs-number">50</span>, description=<span class="hljs-string">&quot;Name must be between 3 and 50 characters&quot;</span>)<br />    age: conint(gt=<span class="hljs-number">0</span>, le=<span class="hljs-number">120</span>) = Field(..., description=<span class="hljs-string">&quot;Age must be between 1 and 120&quot;</span>)  <span class="hljs-comment"># Constrained integer type</span><br />    email: EmailStr = Field(..., description=<span class="hljs-string">&quot;Must be a valid email address&quot;</span>)<br /><br /><span class="hljs-comment"># API route to handle user data submission</span><br /><span class="hljs-meta">@app.post(<span class="hljs-params"><span class="hljs-string">&quot;/create-user/&quot;</span></span>)</span><br /><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">create_user</span>(<span class="hljs-params">user: User</span>):<br />    <span class="hljs-keyword">try</span>:<br />        <span class="hljs-comment"># If validation passes, this will run</span><br />        <span class="hljs-keyword">return</span> {<span class="hljs-string">&quot;message&quot;</span>: <span class="hljs-string">f&quot;User <span class="hljs-subst">{user.name}</span> created successfully!&quot;</span>}<br />    <span class="hljs-keyword">except</span> ValidationError <span class="hljs-keyword">as</span> e:<br />        <span class="hljs-comment"># Catch and return validation errors</span><br />        <span class="hljs-keyword">raise</span> HTTPException(status_code=<span class="hljs-number">400</span>, detail=e.errors())<br /><br /><span class="hljs-comment"># Sample invalid data</span><br />invalid_data = {<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;A&quot;</span>, <span class="hljs-string">&quot;age&quot;</span>: -<span class="hljs-number">5</span>, <span class="hljs-string">&quot;email&quot;</span>: <span class="hljs-string">&quot;invalid_email&quot;</span>}<br /><br /><span class="hljs-comment"># Simulate calling the route with invalid data</span><br /><span class="hljs-meta">@app.get(<span class="hljs-params"><span class="hljs-string">&quot;/test-invalid-data/&quot;</span></span>)</span><br /><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_invalid_data</span>():<br />    <span class="hljs-keyword">try</span>:<br />        user = User(**invalid_data)  <span class="hljs-comment"># Validation will fail here</span><br />    <span class="hljs-keyword">except</span> ValidationError <span class="hljs-keyword">as</span> e:<br />        <span class="hljs-keyword">return</span> {<span class="hljs-string">&quot;error&quot;</span>: e.errors()}<br /><br /><span class="hljs-comment"># Run the server using: uvicorn &lt;filename&gt;:app --reload</span></span></pre><p name="1f00" id="1f00" class="graf graf--p graf-after--pre">In this example, we demonstrate how FastAPI and Pydantic work together to efficiently handle data validation. Using Pydantic‚Äôs <code class="markup--code markup--p-code">BaseModel</code>, we define validation rules for incoming request data. For instance, we utilize <code class="markup--code markup--p-code">EmailStr</code> to automatically validate email formats, simplifying the process without needing custom regex. Similarly, we use <code class="markup--code markup--p-code">conint</code> (a constrained integer type) to ensure age falls within a specific range, from 1 to 120. This approach enhances readability and safety.</p><p name="1eea" id="1eea" class="graf graf--p graf-after--p">In the example code, a <code class="markup--code markup--p-code">User</code> model is defined with fields such as <code class="markup--code markup--p-code">name</code>, <code class="markup--code markup--p-code">age</code>, and <code class="markup--code markup--p-code">email</code>, each having its validation criteria. When a user submits data through the <code class="markup--code markup--p-code">/create-user/</code> route, FastAPI automatically validates the input against these rules. If valid, the user is created successfully; if not, FastAPI raises a <code class="markup--code markup--p-code">400 Bad Request</code> with detailed error messages. This significantly reduces the risk of processing incorrect or malicious data, making FastAPI a powerful choice for secure API development.</p><h3 name="eab1" id="eab1" class="graf graf--h3 graf-after--p">Custom Field/Model Validation with¬†Pydantic</h3><p name="aa5b" id="aa5b" class="graf graf--p graf-after--h3">Pydantic v2 introduces model-level validation, allowing you to validate multiple fields in relation to each other using the @model_validator decorator. This validation runs after field validation and is particularly useful for ensuring that certain conditions between fields are met. For instance, you might want to confirm that a start_date occurs before an end_date in an event model:</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="python" name="f0a0" id="f0a0" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">from</span> pydantic <span class="hljs-keyword">import</span> BaseModel, model_validator<br /><span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> date<br /><br /><span class="hljs-keyword">class</span> <span class="hljs-title class_">Event</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):<br />    name: <span class="hljs-built_in">str</span><br />    start_date: date<br />    end_date: date<br /><br /><span class="hljs-meta">    @model_validator(<span class="hljs-params">mode=<span class="hljs-string">&#x27;after&#x27;</span></span>)</span><br />    <span class="hljs-keyword">def</span> <span class="hljs-title function_">check_dates</span>(<span class="hljs-params">cls, values</span>):<br />        start, end = values.get(<span class="hljs-string">&#x27;start_date&#x27;</span>), values.get(<span class="hljs-string">&#x27;end_date&#x27;</span>)<br />        <span class="hljs-keyword">if</span> start <span class="hljs-keyword">and</span> end <span class="hljs-keyword">and</span> start &gt;= end:<br />            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">&#x27;start_date must be before end_date&#x27;</span>)<br />        <span class="hljs-keyword">return</span> values</span></pre><p name="9c01" id="9c01" class="graf graf--p graf-after--pre">In this example, the <code class="markup--code markup--p-code">@model_validator</code> checks that start_date is earlier than end_date. If this condition is not met, Pydantic raises a validation error. This model-level validation is beneficial for ensuring that the relationships between multiple fields are accurately enforced.</p><h3 name="bbed" id="bbed" class="graf graf--h3 graf-after--p">Custom Serialization in¬†Pydantic</h3><p name="fac6" id="fac6" class="graf graf--p graf-after--h3">Pydantic allows for custom serialization of model fields by overriding the <code class="markup--code markup--p-code">dict()</code> or <code class="markup--code markup--p-code">json()</code> methods. This is useful when you want to modify the output format or exclude certain fields during serialization. You can also use the <code class="markup--code markup--p-code">@property</code> decorator to add computed fields that are included in serialization but not part of the model&#39;s raw data.</p><p name="c176" id="c176" class="graf graf--p graf-after--p">Here‚Äôs an example of custom serialization that modifies how a full name is returned while excluding the <code class="markup--code markup--p-code">password</code> field from the serialized output:</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="python" name="9864" id="9864" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">from</span> pydantic <span class="hljs-keyword">import</span> BaseModel<br /><br /><span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):<br />    first_name: <span class="hljs-built_in">str</span><br />    last_name: <span class="hljs-built_in">str</span><br />    password: <span class="hljs-built_in">str</span><br /><br />    <span class="hljs-comment"># Custom serialization to return the full name</span><br /><span class="hljs-meta">    @property</span><br />    <span class="hljs-keyword">def</span> <span class="hljs-title function_">full_name</span>(<span class="hljs-params">self</span>):<br />        <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;<span class="hljs-subst">{self.first_name}</span> <span class="hljs-subst">{self.last_name}</span>&quot;</span><br /><br />    <span class="hljs-comment"># Overriding dict() to exclude the password</span><br />    <span class="hljs-keyword">def</span> <span class="hljs-title function_">dict</span>(<span class="hljs-params">self, **kwargs</span>):<br />        result = <span class="hljs-built_in">super</span>().<span class="hljs-built_in">dict</span>(**kwargs)<br />        result[<span class="hljs-string">&#x27;full_name&#x27;</span>] = self.full_name  <span class="hljs-comment"># Add computed field</span><br />        result.pop(<span class="hljs-string">&#x27;password&#x27;</span>, <span class="hljs-literal">None</span>)  <span class="hljs-comment"># Remove password from serialization</span><br />        <span class="hljs-keyword">return</span> result<br /><br /><span class="hljs-comment"># Example usage</span><br />user = User(first_name=<span class="hljs-string">&quot;John&quot;</span>, last_name=<span class="hljs-string">&quot;Doe&quot;</span>, password=<span class="hljs-string">&quot;secret123&quot;</span>)<br /><span class="hljs-built_in">print</span>(user.<span class="hljs-built_in">dict</span>())</span></pre><p name="e9f6" id="e9f6" class="graf graf--p graf-after--pre">In this example, <code class="markup--code markup--p-code">full_name</code> is a computed property, and we override the <code class="markup--code markup--p-code">dict()</code> method to ensure <code class="markup--code markup--p-code">password</code> is excluded from the output. Custom serialization like this offers fine-grained control over how model data is exposed in APIs or responses.</p><h3 name="a458" id="a458" class="graf graf--h3 graf-after--p">FastAPI and Pydantic Integration</h3><p name="4231" id="4231" class="graf graf--p graf-after--h3">Pydantic integrates seamlessly with FastAPI, providing automatic data validation for request payloads, query parameters, and path parameters. When you define a Pydantic model in a FastAPI endpoint, FastAPI automatically handles parsing and validating the incoming data against the model‚Äôs rules. If the data is invalid, FastAPI returns a detailed 422 Unprocessable Entity response with clear error messages.</p><p name="cef6" id="cef6" class="graf graf--p graf-after--p">Here‚Äôs a simple example:</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="python" name="e200" id="e200" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">from</span> fastapi <span class="hljs-keyword">import</span> FastAPI<br /><span class="hljs-keyword">from</span> pydantic <span class="hljs-keyword">import</span> BaseModel<br /><br />app = FastAPI()<br /><br /><span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):<br />    username: <span class="hljs-built_in">str</span><br />    age: <span class="hljs-built_in">int</span><br /><br /><span class="hljs-meta">@app.post(<span class="hljs-params"><span class="hljs-string">&quot;/users/&quot;</span></span>)</span><br /><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">create_user</span>(<span class="hljs-params">user: User</span>):<br />    <span class="hljs-keyword">return</span> {<span class="hljs-string">&quot;message&quot;</span>: <span class="hljs-string">f&quot;User <span class="hljs-subst">{user.username}</span> created successfully</span></span></pre><p name="c8f6" id="c8f6" class="graf graf--p graf-after--pre">In this example, when a POST request is sent to <code class="markup--code markup--p-code">/users/</code>, FastAPI uses Pydantic to validate the incoming JSON data. If the data does not conform to the <code class="markup--code markup--p-code">User</code> model (e.g., missing <code class="markup--code markup--p-code">username</code> or an invalid <code class="markup--code markup--p-code">age</code>), FastAPI automatically returns an error response, simplifying input validation and error handling.</p><h3 name="8556" id="8556" class="graf graf--h3 graf-after--p">Summary</h3><p name="da49" id="da49" class="graf graf--p graf-after--h3">In summary, leveraging Pydantic with FastAPI enhances your ability to create robust, maintainable applications by ensuring data integrity through clear validations. This powerful combination simplifies the development process while improving security and reliability, making it a preferred choice for building modern APIs.</p><h3 name="4144" id="4144" class="graf graf--h3 graf-after--p">References</h3><p name="16e6" id="16e6" class="graf graf--p graf-after--h3"><a href="https://fastapi.tiangolo.com/features/#pydantic-features" data-href="https://fastapi.tiangolo.com/features/#pydantic-features" class="markup--anchor markup--p-anchor" rel="noopener noreferrer noopener" target="_blank">Pydantic features in FastAPI</a>¬†<br><a href="https://docs.pydantic.dev/2.0/blog/pydantic-v2/" data-href="https://docs.pydantic.dev/2.0/blog/pydantic-v2/" class="markup--anchor markup--p-anchor" rel="noopener noreferrer noopener" target="_blank">Pydantic V2 Plan</a></p><h3 name="aa6f" id="aa6f" class="graf graf--h3 graf-after--p">In Plain English¬†üöÄ</h3><p name="39cb" id="39cb" class="graf graf--p graf-after--h3"><em class="markup--em markup--p-em">Thank you for being a part of the </em><a href="https://plainenglish.io/" data-href="https://plainenglish.io/" class="markup--anchor markup--p-anchor" rel="noopener ugc nofollow noopener" target="_blank"><strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">In Plain English</em></strong></a><em class="markup--em markup--p-em"> community! Before you go:</em></p><ul class="postList"><li name="32b8" id="32b8" class="graf graf--li graf-after--p">Be sure to <strong class="markup--strong markup--li-strong">clap</strong> and <strong class="markup--strong markup--li-strong">follow</strong> the writer Ô∏èüëè<strong class="markup--strong markup--li-strong">Ô∏èÔ∏è</strong></li><li name="83dc" id="83dc" class="graf graf--li graf-after--li">Follow us: <a href="https://x.com/inPlainEngHQ" data-href="https://x.com/inPlainEngHQ" class="markup--anchor markup--li-anchor" rel="noopener ugc nofollow noopener" target="_blank"><strong class="markup--strong markup--li-strong">X</strong></a> | <a href="https://www.linkedin.com/company/inplainenglish/" data-href="https://www.linkedin.com/company/inplainenglish/" class="markup--anchor markup--li-anchor" rel="noopener ugc nofollow noopener" target="_blank"><strong class="markup--strong markup--li-strong">LinkedIn</strong></a> | <a href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" data-href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" class="markup--anchor markup--li-anchor" rel="noopener ugc nofollow noopener" target="_blank"><strong class="markup--strong markup--li-strong">YouTube</strong></a> | <a href="https://discord.gg/in-plain-english-709094664682340443" data-href="https://discord.gg/in-plain-english-709094664682340443" class="markup--anchor markup--li-anchor" rel="noopener ugc nofollow noopener" target="_blank"><strong class="markup--strong markup--li-strong">Discord</strong></a> | <a href="https://newsletter.plainenglish.io/" data-href="https://newsletter.plainenglish.io/" class="markup--anchor markup--li-anchor" rel="noopener ugc nofollow noopener" target="_blank"><strong class="markup--strong markup--li-strong">Newsletter</strong></a><strong class="markup--strong markup--li-strong"> | </strong><a href="https://open.spotify.com/show/7qxylRWKhvZwMz2WuEoua0?si=6b071022ddc847b9" data-href="https://open.spotify.com/show/7qxylRWKhvZwMz2WuEoua0?si=6b071022ddc847b9" class="markup--anchor markup--li-anchor" rel="noopener ugc nofollow noopener" target="_blank"><strong class="markup--strong markup--li-strong">Podcast</strong></a></li><li name="5b02" id="5b02" class="graf graf--li graf-after--li"><a href="https://differ.blog/" data-href="https://differ.blog/" class="markup--anchor markup--li-anchor" rel="noopener ugc nofollow noopener" target="_blank"><strong class="markup--strong markup--li-strong">Create a free AI-powered blog on Differ.</strong></a></li><li name="0294" id="0294" class="graf graf--li graf-after--li graf--trailing">More content at <a href="https://plainenglish.io/" data-href="https://plainenglish.io/" class="markup--anchor markup--li-anchor" rel="noopener ugc nofollow noopener" target="_blank"><strong class="markup--strong markup--li-strong">PlainEnglish.io</strong></a></li></ul></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@Kfir-G" class="p-author h-card">Kfir Gisman</a> on <a href="https://medium.com/p/a99e34532241"><time class="dt-published" datetime="2024-10-12T16:41:23.956Z">October 12, 2024</time></a>.</p><p><a href="https://medium.com/@Kfir-G/building-robust-components-with-fastapi-and-pydantic-a99e34532241" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on December 20, 2025.</p></footer></article></body></html>