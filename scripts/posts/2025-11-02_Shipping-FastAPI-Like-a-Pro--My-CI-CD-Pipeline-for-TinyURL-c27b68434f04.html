<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Shipping FastAPI Like a Pro: My CI/CD Pipeline for TinyURL</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Shipping FastAPI Like a Pro: My CI/CD Pipeline for TinyURL</h1>
</header>
<section data-field="subtitle" class="p-summary">
When I first deployed TinyURL- my FastAPI + Postgres + Nginx URL shortener-I wanted a workflow that felt real, not just docker compose up…
</section>
<section data-field="body" class="e-content">
<section name="8d82" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="d4e7" id="d4e7" class="graf graf--h3 graf--leading graf--title">Shipping FastAPI Like a Pro: My CI/CD Pipeline for TinyURL</h3><figure name="827c" id="827c" class="graf graf--figure graf-after--h3"><img class="graf-image" data-image-id="1*jZegZscIECNvbkss-NuwQg.jpeg" data-width="1280" data-height="853" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*jZegZscIECNvbkss-NuwQg.jpeg"><figcaption class="imageCaption">Photo by Jan Zakelj: <a href="https://www.pexels.com/photo/a-person-holding-yellow-pipes-9389356/" data-href="https://www.pexels.com/photo/a-person-holding-yellow-pipes-9389356/" class="markup--anchor markup--figure-anchor" rel="noopener" target="_blank">https://www.pexels.com/photo/a-person-holding-yellow-pipes-9389356/</a></figcaption></figure><p name="487b" id="487b" class="graf graf--p graf-after--figure">When I first deployed <strong class="markup--strong markup--p-strong">TinyURL- </strong>my FastAPI + Postgres + Nginx URL shortener-I wanted a workflow that felt real, not just <code class="markup--code markup--p-code">docker compose up</code> on my laptop. So I built a simple but solid <strong class="markup--strong markup--p-strong">CI/CD pipeline</strong> using GitHub Actions that runs tests, builds containers, and deploys automatically.</p><p name="0bce" id="0bce" class="graf graf--p graf-after--p graf--trailing">Here’s what I learned and how it all fits together.</p></div></div></section><section name="a18f" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="9a92" id="9a92" class="graf graf--h3 graf--leading">1. CI/CD isn’t about tools- it’s about trust</h3><p name="666e" id="666e" class="graf graf--p graf-after--h3">The main goal wasn’t automation for its own sake. It was to reach a point where every push to <code class="markup--code markup--p-code">main</code> could safely go live- no surprises, no “works on my machine.”</p><p name="c7c1" id="c7c1" class="graf graf--p graf-after--p graf--trailing">That mindset helped me design a pipeline that checks, builds, and ships with zero manual steps.</p></div></div></section><section name="7d6a" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="1606" id="1606" class="graf graf--h3 graf--leading">2. The build pipeline: test early, build once</h3><p name="5aa4" id="5aa4" class="graf graf--p graf-after--h3">Here’s a simplified view of my GitHub Actions workflow (<code class="markup--code markup--p-code">.github/workflows/deploy.yml</code>):</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="yaml" name="e329" id="e329" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-attr">name:</span> <span class="hljs-string">Deploy</span> <span class="hljs-string">TinyURL</span><br /><br /><span class="hljs-attr">on:</span><br />  <span class="hljs-attr">push:</span><br />    <span class="hljs-attr">branches:</span><br />      <span class="hljs-bullet">-</span> <span class="hljs-string">main</span><br /><span class="hljs-attr">jobs:</span><br />  <span class="hljs-attr">build-and-deploy:</span><br />    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span><br />    <span class="hljs-attr">steps:</span><br />      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Checkout</span> <span class="hljs-string">repo</span><br />        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v4</span><br />      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Set</span> <span class="hljs-string">up</span> <span class="hljs-string">Python</span><br />        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/setup-python@v5</span><br />        <span class="hljs-attr">with:</span><br />          <span class="hljs-attr">python-version:</span> <span class="hljs-number">3.11</span><br />      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Install</span> <span class="hljs-string">dependencies</span><br />        <span class="hljs-attr">run:</span> <span class="hljs-string">pip</span> <span class="hljs-string">install</span> <span class="hljs-string">-r</span> <span class="hljs-string">requirements.txt</span><br />      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Run</span> <span class="hljs-string">tests</span><br />        <span class="hljs-attr">run:</span> <span class="hljs-string">pytest</span> <span class="hljs-string">-q</span><br />      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Build</span> <span class="hljs-string">Docker</span> <span class="hljs-string">images</span><br />        <span class="hljs-attr">run:</span> <span class="hljs-string">docker</span> <span class="hljs-string">compose</span> <span class="hljs-string">-f</span> <span class="hljs-string">docker-compose.prod.yml</span> <span class="hljs-string">build</span><br />      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Deploy</span> <span class="hljs-string">via</span> <span class="hljs-string">SSH</span><br />        <span class="hljs-attr">env:</span><br />          <span class="hljs-attr">HOST:</span> <span class="hljs-string">${{</span> <span class="hljs-string">secrets.EC2_HOST</span> <span class="hljs-string">}}</span><br />          <span class="hljs-attr">KEY:</span> <span class="hljs-string">${{</span> <span class="hljs-string">secrets.EC2_SSH_KEY</span> <span class="hljs-string">}}</span><br />        <span class="hljs-attr">run:</span> <span class="hljs-string">|<br />          echo &quot;$KEY&quot; &gt; key.pem<br />          chmod 600 key.pem<br />          scp -i key.pem docker-compose.prod.yml ubuntu@$HOST:/home/ubuntu/tinyurl/<br />          ssh -i key.pem ubuntu@$HOST &quot;cd /home/ubuntu/tinyurl &amp;&amp; docker compose -f docker-compose.prod.yml up -d --build&quot;</span></span></pre><p name="1e71" id="1e71" class="graf graf--p graf-after--pre">This is the heartbeat of my project:</p><ul class="postList"><li name="a255" id="a255" class="graf graf--li graf-after--p">Every push triggers the pipeline.</li><li name="7f08" id="7f08" class="graf graf--li graf-after--li">Tests must pass before anything deploys.</li><li name="2e28" id="2e28" class="graf graf--li graf-after--li graf--trailing">The build happens <strong class="markup--strong markup--li-strong">once</strong>, and that same build runs in production.</li></ul></div></div></section><section name="f424" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="f0e8" id="f0e8" class="graf graf--h3 graf--leading">3. Containerization made CI/CD predictable</h3><p name="bc85" id="bc85" class="graf graf--p graf-after--h3">The biggest win came from using <strong class="markup--strong markup--p-strong">Docker Compose</strong> for both local and production setups.</p><p name="13ad" id="13ad" class="graf graf--p graf-after--p">My dev environment runs three containers:</p><ul class="postList"><li name="98bc" id="98bc" class="graf graf--li graf-after--p"><code class="markup--code markup--li-code">db</code> (Postgres)</li><li name="b1df" id="b1df" class="graf graf--li graf-after--li"><code class="markup--code markup--li-code">fastapi</code> (backend)</li><li name="ce0a" id="ce0a" class="graf graf--li graf-after--li"><code class="markup--code markup--li-code">nginx</code> (reverse proxy)</li></ul><p name="bfe9" id="bfe9" class="graf graf--p graf-after--li">And my production setup? Exactly the same- except the compose file uses:</p><ul class="postList"><li name="0d29" id="0d29" class="graf graf--li graf-after--p">Different environment variables</li><li name="2fae" id="2fae" class="graf graf--li graf-after--li">Mounted SSL certs from Let’s Encrypt</li><li name="29c7" id="29c7" class="graf graf--li graf-after--li">No auto-reload or debugging</li></ul><p name="e7e1" id="e7e1" class="graf graf--p graf-after--li graf--trailing">Because both stacks share the same Docker config, the CI/CD pipeline doesn’t need special cases or hacks. If it runs locally, it’ll run in CI.</p></div></div></section><section name="6896" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="fda7" id="fda7" class="graf graf--h3 graf--leading">4. Deployment: zero downtime, one command</h3><p name="c2d8" id="c2d8" class="graf graf--p graf-after--h3">Once the new image is built and pushed, the EC2 host just pulls and restarts containers with:</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="css" name="6977" id="6977" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">docker compose -f docker-compose<span class="hljs-selector-class">.prod</span><span class="hljs-selector-class">.yml</span> up -d <span class="hljs-attr">--build</span></span></pre><p name="5aa0" id="5aa0" class="graf graf--p graf-after--pre">Nginx handles live traffic, so backend containers can restart without downtime. Since FastAPI and Nginx talk over Docker’s internal network, there’s no need for manual reconfiguration.</p><p name="408b" id="408b" class="graf graf--p graf-after--p graf--trailing">That “click → push → deploy” feeling is addictive.</p></div></div></section><section name="00da" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="c60b" id="c60b" class="graf graf--h3 graf--leading">5. Secrets are sacred</h3><p name="27db" id="27db" class="graf graf--p graf-after--h3">The pipeline uses <strong class="markup--strong markup--p-strong">GitHub Secrets</strong> to store:</p><ul class="postList"><li name="8e04" id="8e04" class="graf graf--li graf-after--p"><code class="markup--code markup--li-code">EC2_HOST</code> (server IP or domain)</li><li name="407e" id="407e" class="graf graf--li graf-after--li"><code class="markup--code markup--li-code">EC2_SSH_KEY</code> (private key)</li><li name="bd61" id="bd61" class="graf graf--li graf-after--li"><code class="markup--code markup--li-code">POSTGRES_PASSWORD</code></li><li name="3e3d" id="3e3d" class="graf graf--li graf-after--li"><code class="markup--code markup--li-code">FASTAPI_SECRET_KEY</code></li></ul><p name="f4ed" id="f4ed" class="graf graf--p graf-after--li graf--trailing">No plaintext credentials in the repo, no <code class="markup--code markup--p-code">.env</code> files in commits. That alone made me sleep better at night.</p></div></div></section><section name="4fe9" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="f659" id="f659" class="graf graf--h3 graf--leading">6. What I learned the hard way</h3><ul class="postList"><li name="048f" id="048f" class="graf graf--li graf-after--h3"><strong class="markup--strong markup--li-strong">Don’t skip tests- </strong>failing fast is cheaper than debugging in production.</li><li name="01c8" id="01c8" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Don’t rebuild images on the server- </strong>build once, deploy the same artifact.</li><li name="a8a8" id="a8a8" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Keep Docker tags consistent- </strong>otherwise <code class="markup--code markup--li-code">latest</code> will surprise you.</li><li name="a1df" id="a1df" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Automate HTTPS renewal</strong>s- my Let’s Encrypt cron job now runs monthly.</li></ul><p name="f5eb" id="f5eb" class="graf graf--p graf-after--li graf--trailing">These small habits make the pipeline boring- and boring pipelines are the best kind.</p></div></div></section><section name="a29a" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="d236" id="d236" class="graf graf--h3 graf--leading">7. The result</h3><p name="8b6a" id="8b6a" class="graf graf--p graf-after--h3 graf--trailing">Now every push to <code class="markup--code markup--p-code">main</code> runs tests, builds containers, and ships a fully reproducible environment to production. No manual steps, no “did I rebuild?” anxiety. Just continuous confidence.</p></div></div></section><section name="b0f4" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="7ca2" id="7ca2" class="graf graf--h3 graf--leading">Tech Stack Recap</h3><ul class="postList"><li name="8603" id="8603" class="graf graf--li graf-after--h3"><strong class="markup--strong markup--li-strong">FastAPI- </strong>backend API</li><li name="df5a" id="df5a" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">PostgreSQL- </strong>database</li><li name="62d7" id="62d7" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Streamlit- </strong>frontend</li><li name="2a46" id="2a46" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Nginx- </strong>reverse proxy</li><li name="bdbe" id="bdbe" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">GitHub Actions- </strong>CI/CD</li><li name="7fcf" id="7fcf" class="graf graf--li graf-after--li graf--trailing"><strong class="markup--strong markup--li-strong">Docker Compose- </strong>orchestration</li></ul></div></div></section><section name="3d3c" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><blockquote name="137c" id="137c" class="graf graf--blockquote graf--startsWithDoubleQuote graf--leading graf--trailing"><em class="markup--em markup--blockquote-em">“CI/CD isn’t about speed- it’s about peace of mind.”</em></blockquote></div></div></section><section name="1d8d" class="section section--body section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="283d" id="283d" class="graf graf--p graf--leading"><em class="markup--em markup--p-em">This post is part of my TinyURL series- real-world lessons from turning a small FastAPI project into a production-grade service.</em></p><h3 name="6763" id="6763" class="graf graf--h3 graf-after--p">A message from our Founder</h3><p name="5691" id="5691" class="graf graf--p graf-after--h3"><strong class="markup--strong markup--p-strong">Hey, </strong><a href="https://linkedin.com/in/sunilsandhu" data-href="https://linkedin.com/in/sunilsandhu" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--p-strong">Sunil</strong></a><strong class="markup--strong markup--p-strong"> here.</strong> I wanted to take a moment to thank you for reading until the end and for being a part of this community.</p><p name="210d" id="210d" class="graf graf--p graf-after--p">Did you know that our team run these publications as a volunteer effort to over 3.5m monthly readers? <strong class="markup--strong markup--p-strong">We don’t receive any funding, we do this to support the community. ❤️</strong></p><p name="2ac8" id="2ac8" class="graf graf--p graf-after--p">If you want to show some love, please take a moment to <strong class="markup--strong markup--p-strong">follow me on </strong><a href="https://linkedin.com/in/sunilsandhu" data-href="https://linkedin.com/in/sunilsandhu" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--p-strong">LinkedIn</strong></a><strong class="markup--strong markup--p-strong">, </strong><a href="https://tiktok.com/@messyfounder" data-href="https://tiktok.com/@messyfounder" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--p-strong">TikTok</strong></a>, <a href="https://instagram.com/sunilsandhu" data-href="https://instagram.com/sunilsandhu" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--p-strong">Instagram</strong></a>. You can also subscribe to our <a href="https://newsletter.plainenglish.io/" data-href="https://newsletter.plainenglish.io/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--p-strong">weekly newsletter</strong></a>.</p><p name="6004" id="6004" class="graf graf--p graf-after--p graf--trailing">And before you go, don’t forget to <strong class="markup--strong markup--p-strong">clap</strong> and <strong class="markup--strong markup--p-strong">follow</strong> the writer️!</p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@Kfir-G" class="p-author h-card">Kfir Gisman</a> on <a href="https://medium.com/p/c27b68434f04"><time class="dt-published" datetime="2025-11-02T05:06:03.945Z">November 2, 2025</time></a>.</p><p><a href="https://medium.com/@Kfir-G/shipping-fastapi-like-a-pro-my-ci-cd-pipeline-for-tinyurl-c27b68434f04" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on December 20, 2025.</p></footer></article></body></html>