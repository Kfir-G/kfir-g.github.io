<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>From Passive FastAPI Developer to Real FastAPI Engineer- Part 2</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">From Passive FastAPI Developer to Real FastAPI Engineer- Part 2</h1>
</header>
<section data-field="subtitle" class="p-summary">
Your First Raw ASGI App (No Frameworks Allowed).
</section>
<section data-field="body" class="e-content">
<section name="eba2" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="54b0" id="54b0" class="graf graf--h3 graf--leading graf--trailing graf--title">From Passive FastAPI Developer to Real FastAPI Engineer- Part 2</h3></div></div></section><section name="533c" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><figure name="73fe" id="73fe" class="graf graf--figure graf--leading"><img class="graf-image" data-image-id="1*o6ATpTY8qXDv4amVOFcQCQ.jpeg" data-width="1280" data-height="853" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*o6ATpTY8qXDv4amVOFcQCQ.jpeg"><figcaption class="imageCaption">Photo by Kaue Barbier: <a href="https://www.pexels.com/photo/28182837/" data-href="https://www.pexels.com/photo/28182837/" class="markup--anchor markup--figure-anchor" rel="noopener" target="_blank">https://www.pexels.com/photo/28182837/</a></figcaption></figure><p name="304e" id="304e" class="graf graf--p graf-after--figure">Your First Raw ASGI App (No Frameworks Allowed).</p><p name="b312" id="b312" class="graf graf--p graf-after--p">Before FastAPI.<br>Before Starlette.<br>Before Uvicorn.</p><p name="0162" id="0162" class="graf graf--p graf-after--p">There is <strong class="markup--strong markup--p-strong">ASGI- </strong>the low-level async contract that makes modern Python web apps possible.</p><p name="7a02" id="7a02" class="graf graf--p graf-after--p"><a href="https://medium.com/gitconnected/from-passive-fastapi-developer-to-real-fastapi-engineer-part-1-asgi-059a588a54ae" data-href="https://medium.com/gitconnected/from-passive-fastapi-developer-to-real-fastapi-engineer-part-1-asgi-059a588a54ae" class="markup--anchor markup--p-anchor" target="_blank">In Part 1</a>, we learned how HTTP works at the byte level. Now in Part 2, you’re going to <strong class="markup--strong markup--p-strong">build an ASGI app from scratch</strong>.</p><p name="d073" id="d073" class="graf graf--p graf-after--p">No router.<br>No response class.<br>No <code class="markup--code markup--p-code">request.query_params</code>.<br>Just you and the ASGI spec.</p><p name="89e3" id="89e3" class="graf graf--p graf-after--p graf--trailing">Let’s turn the black box into a glass box.</p></div></div></section><section name="7d95" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="07c1" id="07c1" class="graf graf--h3 graf--leading">1. Why Build a Raw ASGI App?</h3><p name="1e67" id="1e67" class="graf graf--p graf-after--h3">Most FastAPI developers never touch ASGI.<br>Most don’t know what’s inside a request.<br>Most don’t know what Uvicorn gives them.<br>Most don’t know what Starlette abstracts.</p><p name="5fb0" id="5fb0" class="graf graf--p graf-after--p">This chapter fixes that.</p><p name="3cff" id="3cff" class="graf graf--p graf-after--p">By the end, you will understand:</p><ul class="postList"><li name="244e" id="244e" class="graf graf--li graf-after--p">How a web server calls your ASGI application</li><li name="92ec" id="92ec" class="graf graf--li graf-after--li">What a <strong class="markup--strong markup--li-strong">scope</strong> is.</li><li name="5e94" id="5e94" class="graf graf--li graf-after--li">How <code class="markup--code markup--li-code">receive()</code> and <code class="markup--code markup--li-code">send()</code> work.</li><li name="03f0" id="03f0" class="graf graf--li graf-after--li">How a single HTTP request becomes <strong class="markup--strong markup--li-strong">events.</strong></li><li name="22f5" id="22f5" class="graf graf--li graf-after--li">The difference between WSGI (sync) and ASGI (async).</li><li name="b60c" id="b60c" class="graf graf--li graf-after--li">What FastAPI really sits on top of.</li></ul><p name="86c7" id="86c7" class="graf graf--p graf-after--li graf--trailing">Once you know this layer, FastAPI becomes predictable, not magical.</p></div></div></section><section name="107f" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="b444" id="b444" class="graf graf--h3 graf--leading">2. ASGI in 60 Seconds</h3><p name="c0b4" id="c0b4" class="graf graf--p graf-after--h3">ASGI = <strong class="markup--strong markup--p-strong">Asynchronous Server Gateway Interface </strong>The modern replacement for WSGI.</p><p name="f541" id="f541" class="graf graf--p graf-after--p">WSGI ASGI Sync Async One call, one response Event-driven HTTP only HTTP + WebSocket + lifespan Blocking Non-blocking.</p><h3 name="a710" id="a710" class="graf graf--h3 graf-after--p">The ASGI callable signature</h3><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="python" name="23fa" id="23fa" class="graf graf--pre graf-after--h3 graf--preV2"><span class="pre--content"><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">app</span>(<span class="hljs-params">scope, receive, send</span>):<br />    ...</span></pre><p name="bfca" id="bfca" class="graf graf--p graf-after--pre">Where:</p><p name="4e34" id="4e34" class="graf graf--p graf-after--p graf--trailing">Parameter Meaning <code class="markup--code markup--p-code">scope</code> Immutable connection info (method, headers, path, etc.) <code class="markup--code markup--p-code">receive()</code> Async function: read events from server (request body, disconnect) <code class="markup--code markup--p-code">send()</code> Async function: send events to server (response start/body)</p></div></div></section><section name="4ace" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="3703" id="3703" class="graf graf--h3 graf--leading">3. Step-by-Step: Build a Raw ASGI App</h3><p name="ae5f" id="ae5f" class="graf graf--p graf-after--h3">Create a file:</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="typescript" name="5fd4" id="5fd4" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">raw_asgi_app.<span class="hljs-property">py</span></span></pre><p name="a7e7" id="a7e7" class="graf graf--p graf-after--pre">Paste this:</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="python" name="e334" id="e334" class="graf graf--pre graf-after--p graf--trailing graf--preV2"><span class="pre--content"><span class="hljs-comment"># raw_asgi_app.py</span><br /><br /><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">app</span>(<span class="hljs-params">scope, receive, send</span>):<br />    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=== SCOPE RECEIVED ===&quot;</span>)<br />    <span class="hljs-built_in">print</span>(scope)<br />    <span class="hljs-comment"># Only handle HTTP requests</span><br />    <span class="hljs-keyword">if</span> scope[<span class="hljs-string">&quot;type&quot;</span>] != <span class="hljs-string">&quot;http&quot;</span>:<br />        <span class="hljs-keyword">return</span><br />    <span class="hljs-comment"># Wait for request event (headers/body)</span><br />    event = <span class="hljs-keyword">await</span> receive()<br />    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=== REQUEST EVENT ===&quot;</span>)<br />    <span class="hljs-built_in">print</span>(event)<br />    body = <span class="hljs-string">b&quot;Hello from raw ASGI!&quot;</span><br />    <span class="hljs-comment"># Send HTTP start</span><br />    <span class="hljs-keyword">await</span> send({<br />        <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;http.response.start&quot;</span>,<br />        <span class="hljs-string">&quot;status&quot;</span>: <span class="hljs-number">200</span>,<br />        <span class="hljs-string">&quot;headers&quot;</span>: [(<span class="hljs-string">b&quot;content-type&quot;</span>, <span class="hljs-string">b&quot;text/plain&quot;</span>)]<br />    })<br />    <span class="hljs-comment"># Send response body</span><br />    <span class="hljs-keyword">await</span> send({<br />        <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;http.response.body&quot;</span>,<br />        <span class="hljs-string">&quot;body&quot;</span>: body,<br />    })</span></pre></div></div></section><section name="48de" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="18ba" id="18ba" class="graf graf--h3 graf--leading">4. Run the App With Uvicorn</h3><p name="f174" id="f174" class="graf graf--p graf-after--h3">Even though we didn’t build routing or server logic, Uvicorn <strong class="markup--strong markup--p-strong">can execute any ASGI app</strong>:</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="lua" name="aac3" id="aac3" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">uvicorn raw_asgi_app:app <span class="hljs-comment">--host 127.0.0.1 --port 8000</span></span></pre><p name="e6df" id="e6df" class="graf graf--p graf-after--pre">Test it:</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="bash" name="e2c8" id="e2c8" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">curl <span class="hljs-string">&quot;http://127.0.0.1:8000/hello?name=kfir&quot;</span></span></pre><p name="418e" id="418e" class="graf graf--p graf-after--pre">Watch your terminal print:</p><ul class="postList"><li name="8725" id="8725" class="graf graf--li graf-after--p">The <strong class="markup--strong markup--li-strong">scope</strong></li><li name="b3cd" id="b3cd" class="graf graf--li graf-after--li">The <strong class="markup--strong markup--li-strong">request event</strong></li><li name="02e3" id="02e3" class="graf graf--li graf-after--li">The ASGI lifecycle</li></ul><p name="8299" id="8299" class="graf graf--p graf-after--li graf--trailing">This is the moment where ASGI becomes real.</p></div></div></section><section name="9145" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="d3ef" id="d3ef" class="graf graf--h3 graf--leading">5. Understanding the ASGI Scope</h3><p name="9fb1" id="9fb1" class="graf graf--p graf-after--h3">Example (shortened):</p><pre data-code-block-mode="2" spellcheck="false" data-code-block-lang="python" name="5fe8" id="5fe8" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content">{<br />    <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;http&quot;</span>,<br />    <span class="hljs-string">&quot;method&quot;</span>: <span class="hljs-string">&quot;GET&quot;</span>,<br />    <span class="hljs-string">&quot;path&quot;</span>: <span class="hljs-string">&quot;/hello&quot;</span>,<br />    <span class="hljs-string">&quot;query_string&quot;</span>: <span class="hljs-string">b&quot;name=kfir&quot;</span>,<br />    <span class="hljs-string">&quot;headers&quot;</span>: [<br />        (<span class="hljs-string">b&quot;host&quot;</span>, <span class="hljs-string">b&quot;127.0.0.1:8000&quot;</span>),<br />        (<span class="hljs-string">b&quot;user-agent&quot;</span>, <span class="hljs-string">b&quot;curl/8.0&quot;</span>),<br />        (<span class="hljs-string">b&quot;accept&quot;</span>, <span class="hljs-string">b&quot;*/*&quot;</span>)<br />    ],<br />    <span class="hljs-string">&quot;client&quot;</span>: (<span class="hljs-string">&quot;127.0.0.1&quot;</span>, <span class="hljs-number">53921</span>),<br />    <span class="hljs-string">&quot;server&quot;</span>: (<span class="hljs-string">&quot;127.0.0.1&quot;</span>, <span class="hljs-number">8000</span>)<br />}</span></pre><p name="0c9e" id="0c9e" class="graf graf--p graf-after--pre graf--trailing">This is exactly the same information Starlette uses to build a <code class="markup--code markup--p-code">Request</code> object.</p></div></div></section><section name="346a" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="f4a8" id="f4a8" class="graf graf--h3 graf--leading">6. Understanding <code class="markup--code markup--h3-code">receive()</code> Events</h3><p name="3dfe" id="3dfe" class="graf graf--p graf-after--h3">For HTTP requests:</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="graphql" name="e006" id="e006" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-punctuation">{</span><br />    <span class="hljs-string">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;http.request&quot;</span>,<br />    <span class="hljs-string">&quot;body&quot;</span><span class="hljs-punctuation">:</span> b<span class="hljs-string">&quot;&quot;</span>,<br />    <span class="hljs-string">&quot;more_body&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal">False</span><br /><span class="hljs-punctuation">}</span></span></pre><p name="5f58" id="5f58" class="graf graf--p graf-after--pre">For clients disconnecting:</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="json" name="99e9" id="99e9" class="graf graf--pre graf-after--p graf--trailing graf--preV2"><span class="pre--content"><span class="hljs-punctuation">{</span><span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;http.disconnect&quot;</span><span class="hljs-punctuation">}</span></span></pre></div></div></section><section name="4ffb" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="27a6" id="27a6" class="graf graf--h3 graf--leading">7. Understanding <code class="markup--code markup--h3-code">send()</code> Events</h3><h3 name="8bc7" id="8bc7" class="graf graf--h3 graf-after--h3">Start the HTTP response:</h3><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="bash" name="0e9c" id="0e9c" class="graf graf--pre graf-after--h3 graf--preV2"><span class="pre--content">{<br />    <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;http.response.start&quot;</span>,<br />    <span class="hljs-string">&quot;status&quot;</span>: 200,<br />    <span class="hljs-string">&quot;headers&quot;</span>: [...],<br />}</span></pre><h3 name="b36a" id="b36a" class="graf graf--h3 graf-after--pre">Send body:</h3><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="bash" name="86ac" id="86ac" class="graf graf--pre graf-after--h3 graf--preV2"><span class="pre--content">{<br />    <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;http.response.body&quot;</span>,<br />    <span class="hljs-string">&quot;body&quot;</span>: b<span class="hljs-string">&quot;...&quot;</span>,<br />}</span></pre><p name="f6ec" id="f6ec" class="graf graf--p graf-after--pre">If streaming:</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="css" name="7128" id="7128" class="graf graf--pre graf-after--p graf--trailing graf--preV2"><span class="pre--content">{&quot;<span class="hljs-selector-tag">body</span>&quot;: chunk, <span class="hljs-string">&quot;more_body&quot;</span>: True}</span></pre></div></div></section><section name="78f2" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="d82e" id="d82e" class="graf graf--h3 graf--leading">8. Diagram — The ASGI Lifecycle</h3><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="scss" name="ad42" id="ad42" class="graf graf--pre graf-after--h3 graf--trailing graf--preV2"><span class="pre--content">Client (curl)<br />   │<br />   ▼<br />Raw HTTP bytes<br />   │<br />   ▼<br />Uvicorn (parsing, connection, events)<br />   │<br />   ▼<br />ASGI App (your app)<br />   │        ▲<br /> <span class="hljs-built_in">send</span>()     │ <span class="hljs-built_in">receive</span>()<br />   ▼        │<br />Response events<br />   │<br />   ▼<br />Uvicorn → TCP → Client</span></pre></div></div></section><section name="15df" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="3d6c" id="3d6c" class="graf graf--h3 graf--leading">9. Compare This With WSGI</h3><p name="f539" id="f539" class="graf graf--p graf-after--h3">WSGI:</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="python" name="1a87" id="1a87" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">def</span> <span class="hljs-title function_">app</span>(<span class="hljs-params">environ, start_response</span>):<br />    ...</span></pre><p name="7820" id="7820" class="graf graf--p graf-after--pre">ASGI:</p><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="python" name="f6a5" id="f6a5" class="graf graf--pre graf-after--p graf--preV2"><span class="pre--content"><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">app</span>(<span class="hljs-params">scope, receive, send</span>):<br />    ...</span></pre><p name="cd9b" id="cd9b" class="graf graf--p graf-after--pre">WSGI gives you:</p><ul class="postList"><li name="6cc2" id="6cc2" class="graf graf--li graf-after--p">sync</li><li name="2509" id="2509" class="graf graf--li graf-after--li">blocking</li><li name="36dd" id="36dd" class="graf graf--li graf-after--li">no streaming</li><li name="ef3e" id="ef3e" class="graf graf--li graf-after--li">no WebSockets</li></ul><p name="a99e" id="a99e" class="graf graf--p graf-after--li">ASGI gives you:</p><ul class="postList"><li name="47df" id="47df" class="graf graf--li graf-after--p">async</li><li name="8c8a" id="8c8a" class="graf graf--li graf-after--li">streaming</li><li name="c9ad" id="c9ad" class="graf graf--li graf-after--li">background tasks</li><li name="ff48" id="ff48" class="graf graf--li graf-after--li">WebSockets</li><li name="8271" id="8271" class="graf graf--li graf-after--li graf--trailing">HTTP/2 support</li></ul></div></div></section><section name="2e46" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="5bb2" id="5bb2" class="graf graf--h3 graf--leading">10. Quick Exercises</h3><h3 name="fe0e" id="fe0e" class="graf graf--h3 graf-after--h3">1. Return JSON manually</h3><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="ini" name="9eb1" id="9eb1" class="graf graf--pre graf-after--h3 graf--preV2"><span class="pre--content"><span class="hljs-attr">body</span> = b<span class="hljs-string">&#x27;{&quot;msg&quot;:&quot;hello&quot;}&#x27;</span><br /><span class="hljs-attr">headers</span> = [(b<span class="hljs-string">&quot;content-type&quot;</span>, b<span class="hljs-string">&quot;application/json&quot;</span>)]</span></pre><h3 name="3c3d" id="3c3d" class="graf graf--h3 graf-after--pre">2. Parse query params manually</h3><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="ini" name="8df0" id="8df0" class="graf graf--pre graf-after--h3 graf--preV2"><span class="pre--content"><span class="hljs-attr">qs</span> = scope[<span class="hljs-string">&quot;query_string&quot;</span>].decode()</span></pre><h3 name="c288" id="c288" class="graf graf--h3 graf-after--pre">3. Print content length</h3><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="css" name="8eca" id="8eca" class="graf graf--pre graf-after--h3 graf--preV2"><span class="pre--content">for name, value in scope<span class="hljs-selector-attr">[<span class="hljs-string">&quot;headers&quot;</span>]</span>:<br />    if name == b<span class="hljs-string">&quot;content-length&quot;</span>:<br />        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Content-Length:&quot;</span>, value.<span class="hljs-built_in">decode</span>())</span></pre><h3 name="b702" id="b702" class="graf graf--h3 graf-after--pre">4. Respond in two chunks (streaming)</h3><pre data-code-block-mode="1" spellcheck="false" data-code-block-lang="python" name="af72" id="af72" class="graf graf--pre graf-after--h3 graf--trailing graf--preV2"><span class="pre--content"><span class="hljs-keyword">await</span> send({<span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;http.response.body&quot;</span>, <span class="hljs-string">&quot;body&quot;</span>: <span class="hljs-string">b&quot;Hello &quot;</span>, <span class="hljs-string">&quot;more_body&quot;</span>: <span class="hljs-literal">True</span>})<br /><span class="hljs-keyword">await</span> send({<span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;http.response.body&quot;</span>, <span class="hljs-string">&quot;body&quot;</span>: <span class="hljs-string">b&quot;Kfir!&quot;</span>})</span></pre></div></div></section><section name="a4fc" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h4 name="c19c" id="c19c" class="graf graf--h4 graf--leading">Wrapping Up: Why You Just Built ASGI by Hand</h4><p name="119e" id="119e" class="graf graf--p graf-after--h4">By writing an ASGI app without FastAPI, Starlette, or any framework, you’ve crossed an important threshold: you now understand what <strong class="markup--strong markup--p-strong">actually happens before any modern Python web framework can do its job</strong>.</p><p name="5804" id="5804" class="graf graf--p graf-after--p">You saw how:</p><ul class="postList"><li name="e181" id="e181" class="graf graf--li graf-after--p">A TCP connection becomes <strong class="markup--strong markup--li-strong">raw HTTP bytes.</strong></li><li name="4e36" id="4e36" class="graf graf--li graf-after--li">Those bytes become an <strong class="markup--strong markup--li-strong">ASGI scope + events.</strong></li><li name="b8df" id="b8df" class="graf graf--li graf-after--li">Your Python code responds using <strong class="markup--strong markup--li-strong">send()/receive() .</strong></li><li name="2af7" id="2af7" class="graf graf--li graf-after--li">The entire request/response lifecycle is just <strong class="markup--strong markup--li-strong">structured events</strong>, not magic.</li></ul><p name="3039" id="3039" class="graf graf--p graf-after--li">This understanding is what separates a <strong class="markup--strong markup--p-strong">FastAPI user</strong> from a <strong class="markup--strong markup--p-strong">FastAPI engineer</strong>.</p><p name="cc62" id="cc62" class="graf graf--p graf-after--p">Every routing decision, middleware execution, background task, and WebSocket message ultimately reduces to the exact pattern you implemented manually.</p><p name="82c6" id="82c6" class="graf graf--p graf-after--p">If you can build this tiny ASGI app from scratch, you can understand, debug, and optimize any modern Python web stack- from Uvicorn workers to Starlette internals all the way up to FastAPI dependencies.</p><p name="2dee" id="2dee" class="graf graf--p graf-after--p graf--trailing">Congratulations. You’re officially “under the hood.”</p></div></div></section><section name="215a" class="section section--body section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="345a" id="345a" class="graf graf--h3 graf--leading">Official References (Highly Recommended)</h3><p name="c67a" id="c67a" class="graf graf--p graf-after--h3">These are the <em class="markup--em markup--p-em">authoritative sources</em> behind everything in this blog:</p><h3 name="90b7" id="90b7" class="graf graf--h3 graf-after--p">ASGI</h3><ul class="postList"><li name="eb58" id="eb58" class="graf graf--li graf-after--h3">Official ASGI Spec<br> <a href="https://asgi.readthedocs.io/en/latest/specs/main.html" data-href="https://asgi.readthedocs.io/en/latest/specs/main.html" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">https://asgi.readthedocs.io/en/latest/specs/main.html</a></li></ul><h3 name="7307" id="7307" class="graf graf--h3 graf-after--li">HTTP / Request Lifecycle</h3><ul class="postList"><li name="9eb8" id="9eb8" class="graf graf--li graf-after--h3">HTTP Semantics — RFC 9110<br> <a href="https://httpwg.org/specs/rfc9110.html" data-href="https://httpwg.org/specs/rfc9110.html" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">https://httpwg.org/specs/rfc9110.html</a></li><li name="da60" id="da60" class="graf graf--li graf-after--li">HTTP/1.1 Message Syntax — RFC 9112<br> <a href="https://httpwg.org/specs/rfc9112.html" data-href="https://httpwg.org/specs/rfc9112.html" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">https://httpwg.org/specs/rfc9112.html</a></li></ul><h3 name="04d9" id="04d9" class="graf graf--h3 graf-after--li">Uvicorn</h3><ul class="postList"><li name="3c5e" id="3c5e" class="graf graf--li graf-after--h3">Official Uvicorn Docs<br> <a href="https://www.uvicorn.org" data-href="https://www.uvicorn.org" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">https://www.uvicorn.org</a></li></ul><h3 name="fe3d" id="fe3d" class="graf graf--h3 graf-after--li">Starlette (ASGI Toolkit)</h3><ul class="postList"><li name="d7e8" id="d7e8" class="graf graf--li graf-after--h3">Official Starlette Docs<br> <a href="https://www.starlette.io" data-href="https://www.starlette.io" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">https://www.starlette.io</a></li></ul><h3 name="4d21" id="4d21" class="graf graf--h3 graf-after--li">FastAPI</h3><ul class="postList"><li name="08e5" id="08e5" class="graf graf--li graf-after--h3">Official FastAPI Docs<br> <a href="https://fastapi.tiangolo.com" data-href="https://fastapi.tiangolo.com" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">https://fastapi.tiangolo.com</a></li></ul><h3 name="ea5b" id="ea5b" class="graf graf--h3 graf-after--li">WSGI / CGI History</h3><ul class="postList"><li name="a7f3" id="a7f3" class="graf graf--li graf-after--h3">WSGI PEP 333<br> <a href="https://peps.python.org/pep-0333" data-href="https://peps.python.org/pep-0333" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">https://peps.python.org/pep-0333</a></li><li name="86eb" id="86eb" class="graf graf--li graf-after--li">WSGI PEP 3333<br> <a href="https://peps.python.org/pep-3333" data-href="https://peps.python.org/pep-3333" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">https://peps.python.org/pep-3333</a></li><li name="e91c" id="e91c" class="graf graf--li graf-after--li graf--trailing">Common Gateway Interface<br> <a href="https://www.rfc-editor.org/rfc/rfc3875" data-href="https://www.rfc-editor.org/rfc/rfc3875" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">https://www.rfc-editor.org/rfc/rfc3875</a></li></ul></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@Kfir-G" class="p-author h-card">Kfir Gisman</a> on <a href="https://medium.com/p/c02de4a20dad"><time class="dt-published" datetime="2025-12-08T03:28:33.354Z">December 8, 2025</time></a>.</p><p><a href="https://medium.com/@Kfir-G/from-passive-fastapi-developer-to-real-fastapi-engineer-part-2-c02de4a20dad" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on December 20, 2025.</p></footer></article></body></html>